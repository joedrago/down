artIndices = [7,7,7,7,7,7,7,27,30,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,26,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,23,7,7,27,30,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,32,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,27,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,32,16,16,16,16,16,16,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,23,7,30,17,17,17,17,17,17,17,17,17,17,17,17,17,17,32,26,16,8,8,8,8,16,7,7,7,7,7,7,7,7,7,23,7,7,7,7,7,7,7,27,17,17,17,17,17,17,17,17,17,17,17,17,32,26,7,7,16,8,8,8,8,16,7,7,7,7,7,7,7,7,7,7,7,7,16,16,16,16,16,16,30,17,17,17,17,17,17,17,17,17,32,16,16,16,16,16,16,6,6,6,6,16,16,16,16,7,7,7,7,7,16,16,16,16,16,8,8,8,16,7,27,30,17,17,17,17,17,17,17,17,26,16,8,8,8,8,8,8,8,8,8,8,8,8,16,7,7,7,7,7,16,7,7,23,16,6,6,6,16,7,7,7,27,30,17,17,17,17,17,32,7,16,8,8,8,8,8,8,8,8,8,8,8,8,16,7,7,7,7,7,16,23,7,7,16,8,8,8,16,7,23,7,7,27,30,17,17,17,32,26,7,16,8,8,8,8,8,8,8,8,8,8,8,8,16,7,7,7,7,7,16,7,23,7,16,8,8,8,16,7,7,7,7,7,27,30,17,32,26,7,7,16,8,8,8,8,8,8,8,8,8,8,16,16,16,7,7,23,7,7,16,7,7,7,16,16,22,16,16,7,7,7,23,7,7,27,40,26,7,7,23,16,16,16,16,16,8,8,8,8,8,8,16,7,7,7,7,7,7,23,16,7,7,7,7,23,15,7,7,7,7,7,7,7,7,7,35,7,7,7,7,7,7,7,7,16,8,8,8,8,8,8,16,7,7,7,7,7,7,7,16,7,7,23,7,7,15,7,7,7,7,23,10,11,11,11,11,11,11,11,11,11,11,11,11,22,8,8,8,8,8,8,16,7,7,7,23,7,7,11,11,11,11,11,11,11,14,11,11,11,11,11,13,23,7,28,39,29,45,23,7,7,7,7,7,16,8,8,8,8,8,8,16,7,7,7,7,7,7,7,16,7,7,23,7,7,7,23,7,7,7,7,15,28,33,17,17,43,31,38,7,7,23,23,7,16,16,16,16,8,8,8,16,7,23,7,7,7,7,7,16,7,23,7,16,16,16,16,16,7,7,7,15,33,17,8,8,8,17,29,7,45,7,7,7,7,7,7,16,8,8,8,16,7,7,7,7,7,7,7,16,7,7,7,16,8,8,8,16,7,7,23,15,30,17,8,8,8,17,43,44,31,38,7,7,7,7,23,16,16,16,16,16,7,7,7,7,7,7,7,16,16,16,16,16,6,6,6,16,23,7,7,15,27,30,31,15,33,32,26,27,37,7,23,7,7,7,7,7,7,7,16,7,7,7,7,7,7,7,7,7,7,7,7,16,8,8,8,22,11,11,11,14,11,11,11,14,12,11,11,11,11,11,11,11,11,12,11,11,11,11,11,11,11,11,11,11,11,11,7,7,7,7,7,16,8,16,16,16,7,7,7,23,7,7,23,7,15,7,23,7,36,7,23,7,7,15,7,7,7,7,16,23,7,7,7,7,7,7,23,7,7,7,7,16,8,8,8,16,23,7,7,7,7,7,16,16,22,16,16,28,39,29,7,16,16,22,16,16,23,7,16,7,7,7,23,7,7,7,7,7,7,7,7,16,8,16,16,16,16,16,16,7,7,16,16,8,8,8,16,16,30,31,38,16,8,8,8,16,16,16,16,16,7,23,7,7,7,7,7,7,7,23,7,16,8,8,8,8,8,8,16,7,23,16,8,8,8,8,8,16,27,37,7,16,6,6,6,16,16,8,8,16,16,7,7,7,7,7,7,7,7,7,7,16,8,8,8,8,8,8,16,16,16,16,6,6,6,6,6,16,7,35,7,16,8,8,8,8,8,8,8,8,16,7,7,7,7,7,7,7,7,7,7,16,8,8,8,8,8,8,16,7,7,16,8,8,8,8,8,16,7,36,7,16,8,8,8,8,8,8,8,8,16,7,7,7,7,7,7,7,7,7,7,16,8,8,8,8,8,8,16,23,7,16,16,8,8,8,16,16,28,39,29,16,8,8,8,16,16,8,8,16,16,7,7,23,7,7,7,23,7,7,7,16,16,16,16,16,16,16,16,7,7,23,16,16,16,16,16,7,27,30,31,16,16,16,16,16,16,16,16,16,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,27,30,31,29,7,45,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,23,7,7,27,41,43,44,31,29,7,7,23,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,23,7,7,7,7,7,7,7,7,7,7,7,7,7,7,28,42,26,27,30,31,38,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,28,34,26,7,7,27,37,7,7,7,23,7,7,23,7,7,7,7,7,7,7,7,7,7,7,7,7,7,23,7,7,7,7,7,7,7,7,7,7,28,34,26,7,7,7,23,35,7,7,7,7,7,7,7,7,7,7]
collisionIndices = [2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,2,0,0,2,2,2,2,2,2,2,2,2,0,2,0,2,2,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,0,0,0,2,0,0,0,2,0,0,0,0,2,2,2,2,2,2,2,0,2,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,0,0,0,2,0,0,0,2,0,0,0,0,0,2,2,2,2,2,0,0,2,0,0,0,0,0,0,0,2,2,0,0,0,2,2,2,2,2,2,2,0,0,0,2,0,0,0,2,0,0,0,0,0,2,2,2,2,0,0,0,2,2,2,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,0,0,0,2,2,3,2,2,0,0,0,0,0,0,0,2,0,0,0,0,2,2,2,2,2,0,0,0,2,2,0,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,0,0,0,0,0,0,2,2,2,2,0,2,2,2,2,2,2,2,2,2,2,2,0,0,0,2,2,2,2,2,0,0,0,0,2,2,0,0,0,2,2,0,0,0,0,0,0,0,0,2,0,0,0,2,2,2,2,2,2,2,2,2,0,0,0,2,0,0,0,2,0,0,0,0,2,2,0,0,0,2,2,2,2,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,2,0,0,0,0,0,2,2,0,2,2,0,0,2,0,0,0,0,0,0,0,0,0,2,0,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,2,0,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,2,0,0,0,0,0,0,2,2,3,2,2,0,2,0,0,2,2,3,2,2,0,0,2,0,2,2,2,2,2,2,2,2,2,2,2,2,0,2,2,2,2,2,2,0,0,2,2,0,0,0,2,2,2,2,0,2,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,2,0,0,2,0,0,0,0,0,2,2,2,0,2,0,0,0,2,2,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0,2,2,2,0,2,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,2,2,2,0,2,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,2,2,2,2,2,0,0,0,2,2,2,2,0,2,0,0,0,2,2,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2]

class GeneratedTilemap
  constructor: ->
    @tiles = "town"
    @width = 40
    @height = 32
    @bright = true

    @entrances =
      start:
        x: 17
        y: 15
      dungeon0:
        x: 2
        y: 18


    @grid = []
    for i in [0...@width]
      @grid[i] = []
      for j in [0...@height]
        index = i + ((@height-1 - j) * @width)
        @grid[i][j] =
          x: i
          y: j
          index: artIndices[index] - 1
        coll = collisionIndices[index] - 1
        if coll == 1 # wall
          @grid[i][j].wall = true
        if coll == 2 # door
          @grid[i][j].door = true

    # configure exits
    @grid[1][18].exit =
      floor: "dungeon0"
      entrance: "town"


    @items = []
    @npcs = []

module.exports = ->
  return new GeneratedTilemap()
