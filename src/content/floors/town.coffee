artIndices = [7,7,7,7,7,7,7,7,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,16,16,16,16,16,16,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,7,16,8,8,8,8,16,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,17,17,17,17,17,17,17,17,17,17,17,17,17,7,7,7,16,8,8,8,8,16,7,7,7,7,7,7,7,7,7,7,7,7,16,16,16,16,16,16,17,17,17,17,17,17,17,17,17,17,17,16,16,16,16,16,16,6,6,6,6,16,16,16,16,7,7,7,7,7,16,16,16,16,16,8,8,8,16,7,7,17,17,17,17,17,17,17,17,17,7,16,8,8,8,8,8,8,8,8,8,8,8,8,16,7,7,7,7,7,16,7,7,7,16,6,6,6,16,7,7,7,7,17,17,17,17,17,17,17,7,16,8,8,8,8,8,8,8,8,8,8,8,8,16,7,7,7,7,7,16,7,7,7,16,8,8,8,16,7,7,7,7,7,17,17,17,17,17,7,7,16,8,8,8,8,8,8,8,8,8,8,8,8,16,7,7,7,7,7,16,7,7,7,16,8,8,8,16,7,7,7,7,7,17,17,17,17,7,7,7,16,8,8,8,8,8,8,8,8,8,8,16,16,16,7,7,7,7,7,16,7,7,7,16,16,22,16,16,7,7,7,7,7,7,7,17,7,7,7,7,16,16,16,16,16,8,8,8,8,8,8,16,7,7,7,7,7,7,7,16,7,7,7,7,7,15,7,7,7,7,7,7,7,7,7,17,7,7,7,7,7,7,7,7,16,8,8,8,8,8,8,16,7,7,7,7,7,7,7,16,7,7,7,7,7,15,7,7,7,7,7,10,11,11,11,11,11,11,11,11,11,11,11,11,22,8,8,8,8,8,8,16,7,7,7,7,7,7,11,11,11,11,11,11,11,14,11,11,11,11,11,13,7,7,7,17,7,7,7,7,7,7,7,7,16,8,8,8,8,8,8,16,7,7,7,7,7,7,7,16,7,7,7,7,7,7,7,7,7,7,7,15,7,17,17,17,17,17,7,7,7,7,7,7,16,16,16,16,8,8,8,16,7,7,7,7,7,7,7,16,7,7,7,16,16,16,16,16,7,7,7,15,17,17,8,8,8,17,17,7,7,7,7,7,7,7,7,16,8,8,8,16,7,7,7,7,7,7,7,16,7,7,7,16,8,8,8,16,7,7,7,15,17,17,8,8,8,17,17,17,17,7,7,7,7,7,7,16,16,16,16,16,7,7,7,7,7,7,7,16,16,16,16,16,6,6,6,16,7,7,7,15,7,17,17,15,17,17,7,7,17,7,7,7,7,7,7,7,7,7,16,7,7,7,7,7,7,7,7,7,7,7,7,16,8,8,8,22,11,11,11,14,11,11,11,14,12,11,11,11,11,11,11,11,11,12,11,11,11,11,11,11,11,11,11,11,11,11,7,7,7,7,7,16,8,16,16,16,7,7,7,7,7,7,7,7,15,7,7,7,17,7,7,7,7,15,7,7,7,7,16,7,7,7,7,7,7,7,7,7,7,7,7,16,8,8,8,16,7,7,7,7,7,7,16,16,22,16,16,7,17,17,7,16,16,22,16,16,7,7,16,7,7,7,7,7,7,7,7,7,7,7,7,16,8,16,16,16,16,16,16,7,7,16,16,8,8,8,16,16,7,17,7,16,8,8,8,16,16,16,16,16,7,7,7,7,7,7,7,7,7,7,7,16,8,8,8,8,8,8,16,7,7,16,8,8,8,8,8,16,7,17,7,16,6,6,6,16,16,8,8,16,16,7,7,7,7,7,7,7,7,7,7,16,8,8,8,8,8,8,16,16,16,16,6,6,6,6,6,16,7,17,7,16,8,8,8,8,8,8,8,8,16,7,7,7,7,7,7,7,7,7,7,16,8,8,8,8,8,8,16,7,7,16,8,8,8,8,8,16,7,17,7,16,8,8,8,8,8,8,8,8,16,7,7,7,7,7,7,7,7,7,7,16,8,8,8,8,8,8,16,7,7,16,16,8,8,8,16,16,7,17,7,16,8,8,8,16,16,8,8,16,16,7,7,7,7,7,7,7,7,7,7,16,16,16,16,16,16,16,16,7,7,7,16,16,16,16,16,7,7,17,17,16,16,16,16,16,16,16,16,16,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,17,17,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,17,17,17,17,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,17,7,7,17,17,17,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,17,17,7,7,7,7,17,17,17,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,17,17,7,7,7,7,7,7,7,17,17,7,7,7,7,7,7]
collisionIndices = [2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,2,0,0,2,2,2,2,2,2,2,2,2,0,2,0,2,2,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,0,0,0,2,0,0,0,2,0,0,0,0,2,2,2,2,2,2,2,0,2,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,0,0,0,2,0,0,0,2,0,0,0,0,0,2,2,2,2,2,0,0,2,0,0,0,0,0,0,0,2,2,0,0,0,2,2,2,2,2,2,2,0,0,0,2,0,0,0,2,0,0,0,0,0,2,2,2,2,0,0,0,2,2,2,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,0,0,0,2,2,3,2,2,0,0,0,0,0,0,0,2,0,0,0,0,2,2,2,2,2,0,0,0,2,2,0,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,0,0,0,0,0,0,2,2,2,2,0,2,2,2,2,2,2,2,2,2,2,2,0,0,0,2,2,2,2,2,0,0,0,0,2,2,0,0,0,2,2,0,0,0,0,0,0,0,0,2,0,0,0,2,2,2,2,2,2,2,2,2,0,0,0,2,0,0,0,2,0,0,0,0,2,2,0,0,0,2,2,2,2,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,2,0,0,0,0,0,2,2,0,2,2,0,0,2,0,0,0,0,0,0,0,0,0,2,0,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,2,0,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,2,0,0,0,0,0,0,2,2,3,2,2,0,2,2,0,2,2,3,2,2,0,0,2,0,2,2,2,2,2,2,2,2,2,2,2,2,0,2,2,2,2,2,2,0,0,2,2,0,0,0,2,2,2,2,0,2,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,2,0,0,2,0,0,0,0,0,2,2,2,0,2,0,0,0,2,2,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0,2,2,2,0,2,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,2,2,2,0,2,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,2,2,2,2,2,0,0,0,2,2,2,2,0,2,0,0,0,2,2,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2]

class GeneratedTilemap
  constructor: ->
    @tiles = "town"
    @width = 40
    @height = 32
    @bright = true

    @entrances =
      start:
        x: 17
        y: 15
      dungeon0:
        x: 2
        y: 18


    @grid = []
    for i in [0...@width]
      @grid[i] = []
      for j in [0...@height]
        index = i + ((@height-1 - j) * @width)
        @grid[i][j] =
          x: i
          y: j
          index: artIndices[index] - 1
        coll = collisionIndices[index] - 1
        if coll == 1 # wall
          @grid[i][j].wall = true
        if coll == 2 # door
          @grid[i][j].door = true

    # configure exits
    @grid[1][18].exit =
      floor: "dungeon0"
      entrance: "town"


    @items = []
    @npcs = []

module.exports = ->
  return new GeneratedTilemap()
